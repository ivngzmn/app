"use strict";(self.webpackChunk_open_sauced_app=self.webpackChunk_open_sauced_app||[]).push([[5468],{"./components/molecules/ListCard/list-card.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>list_card_stories});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),tooltip=__webpack_require__("./components/atoms/Tooltip/tooltip.tsx"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),md=__webpack_require__("./node_modules/react-icons/md/index.mjs"),ri=__webpack_require__("./node_modules/react-icons/ri/index.mjs"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),bs=__webpack_require__("./node_modules/react-icons/bs/index.mjs"),Typography_text=__webpack_require__("./components/atoms/Typography/text.tsx"),useList=__webpack_require__("./lib/hooks/useList.ts"),card=__webpack_require__("./components/atoms/Card/card.tsx"),stacked_avatar=__webpack_require__("./components/molecules/StackedAvatar/stacked-avatar.tsx"),__jsx=react.createElement;const ListCard=_ref=>{let{list,handleOnDeleteClick,workspaceId,user}=_ref;const{data:contributors,meta}=(0,useList.Uc)(workspaceId,list.id),contributorsAvatar=null==contributors?void 0:contributors.map((contributor=>({host_login:contributor.login||contributor.username})));return __jsx(card.Z,null,__jsx("div",{className:"flex flex-col items-start w-full gap-4 px-4 py-6 bg-white rounded-lg md:items-center md:justify-between md:flex-row lg:px-8 lg:gap-2"},__jsx("div",{className:"flex flex-col flex-1 gap-4 lg:gap-6"},__jsx("div",{className:"flex items-center gap-4 lg:items-center "},__jsx("div",{className:"w-4 h-4 rounded-full bg-light-orange-10"}),__jsx("div",{className:"flex justify-between text-xl text-light-slate-12"},__jsx(link_default(),{href:workspaceId?"/workspaces/".concat(workspaceId,"/contributor-insights/").concat(list.id,"/overview"):"/lists/".concat(list.id,"/overview")},list.name)),__jsx("div",{className:(0,clsx_m.Z)("px-2 border rounded-2xl text-light-slate-11",handleOnDeleteClick?"":"text-orange-700 bg-orange-50 border-orange-600")},handleOnDeleteClick?list.is_public?"public":"private":"demo"),__jsx("div",{className:"flex-1 md:hidden"},__jsx("span",{className:" bg-light-slate-1 inline-block rounded-lg p-2.5 border mr-2"},__jsx(link_default(),{href:"/lists/".concat(list.id,"/edit")},__jsx(bs.Aac,{title:"Edit Insight Page",className:"text-light-slate-10 text-md cursor-pointer w-4"})))))),__jsx("div",null,__jsx("div",{className:"flex items-center justify-end w-full gap-8"},__jsx("div",{className:"flex flex-col items-center flex-1 gap-1 mr-2"},__jsx("span",{className:"text-xs text-light-slate-11"},"Contributors"),__jsx(Typography_text.Z,{className:"flex items-center text-2xl"},meta.itemCount)),__jsx("div",{className:"flex items-center"},__jsx(stacked_avatar.Z,{contributors:contributorsAvatar,visibleQuantity:6,classNames:"scale-125"})),__jsx("div",{className:"justify-end flex-1 hidden md:flex items-center gap-2"},__jsx(link_default(),{href:"/lists/".concat(list.id,"/edit")},__jsx("span",{className:" bg-light-slate-1 inline-block rounded-lg p-2.5 border cursor-pointer"},__jsx(bs.Aac,{title:"Edit List Page",className:"text-light-slate-10 text-lg"}))),handleOnDeleteClick&&!!user&&__jsx("button",{onClick:()=>handleOnDeleteClick(list.name,list.id),className:"p-2.5 mb-1.5 border !border-light-slate-4 rounded-lg cursor-pointer bg-light-slate-1",type:"button"},__jsx(ri.qy0,{title:"Delete List",className:"text-lg text-light-slate-10"})),__jsx(link_default(),{href:"/lists/".concat(list.id,"/overview")},__jsx("span",{className:"bg-light-slate-1 inline-block rounded-lg p-2.5 border cursor-pointer"},__jsx(md.Djl,{title:"Go To List Page",className:"text-light-slate-10 text-lg"}))))))))};ListCard.displayName="ListCard";const list_card=ListCard;try{listcard.displayName="listcard",listcard.__docgenInfo={description:"",displayName:"listcard",props:{list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"DbUserList"}},handleOnDeleteClick:{defaultValue:null,description:"",name:"handleOnDeleteClick",required:!1,type:{name:"((listName: string, listId: string) => void)"}},workspaceId:{defaultValue:null,description:"",name:"workspaceId",required:!1,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"User | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/ListCard/list-card.tsx#listcard"]={docgenInfo:listcard.__docgenInfo,name:"listcard",path:"components/molecules/ListCard/list-card.tsx#listcard"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,list_card_stories_jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const list_card_stories={title:"Design System/Molecules/ListCard"},ListCardTemplate=args=>list_card_stories_jsx(tooltip.O,null,list_card_stories_jsx(list_card,args));ListCardTemplate.displayName="ListCardTemplate";const Default=ListCardTemplate.bind({});Default.args={list:{id:"1",name:"List 1",is_public:!0,created_at:"2021-08-10T14:00:00.000Z",updated_at:"2021-08-10T14:00:00.000Z",user:{id:1,login:"user1",name:"User 1"}}},Default.parameters=_objectSpread(_objectSpread({},Default.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:_objectSpread({originalSource:"args => <TipProvider>\n    <ListCard {...args} />\n  </TipProvider>"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})});const __namedExportsOrder=["Default"]},"./components/atoms/Card/card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;const Card=_ref=>{let{className,children,heading,focusable=!1}=_ref;return __jsx("article",{className:"".concat(className||""," block ").concat(heading?"":"p-3"," bg-white border rounded-lg shadow-xs"),tabIndex:focusable?0:void 0},heading?__jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx("div",{className:"px-3 py-3 rounded-t-lg md:px-6 bg-light-slate-3"},heading),__jsx("div",null,children)):children)};Card.displayName="Card";const __WEBPACK_DEFAULT_EXPORT__=Card;try{card.displayName="card",card.__docgenInfo={description:"",displayName:"card",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},heading:{defaultValue:null,description:"",name:"heading",required:!1,type:{name:"ReactNode"}},focusable:{defaultValue:{value:"false"},description:"",name:"focusable",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/atoms/Card/card.tsx#card"]={docgenInfo:card.__docgenInfo,name:"card",path:"components/atoms/Card/card.tsx#card"})}catch(__react_docgen_typescript_loader_error){}},"./components/molecules/StackedAvatar/stacked-avatar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>stacked_avatar});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),next_router=__webpack_require__("./node_modules/next/router.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),avatar_hover_card=__webpack_require__("./components/atoms/Avatar/avatar-hover-card.tsx"),dist=__webpack_require__("./node_modules/swr/core/dist/index.mjs"),public_api_fetcher=__webpack_require__("./lib/utils/public-api-fetcher.ts");const hooks_useInsight=id=>{const baseEndpoint="insights/".concat(id),endpointString="".concat(baseEndpoint),{data,error,mutate}=(0,dist.ZP)(id?endpointString:null,public_api_fetcher.N);return{data,isLoading:!error&&!data,isError:!!error&&Object.keys(error).length>0,mutate}};var fallback_values=__webpack_require__("./lib/utils/fallback-values.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js"),__jsx=react.createElement;const StackedAvatar=_ref=>{let{contributors,visibleQuantity=5,classNames}=_ref;const router=(0,next_router.useRouter)(),{pageId}=router.query,insightId=Number.isInteger(parseInt(pageId,10))?pageId:"",{data:insight,isError}=hooks_useInsight(insightId),repositories=insight?insight.repos.map((repo=>repo.repo_id)):[];return isError?(console.log("Error fetching insight",isError),__jsx("div",null,fallback_values.I)):__jsx("div",{className:(0,clsx_m.Z)("flex -space-x-3 transition-all duration-300 hover:-space-x-1",classNames)},contributors&&contributors.slice(0,visibleQuantity).map((_ref2=>{let{host_login:hostLogin}=_ref2;return __jsx("div",{key:"contributor-avatar-".concat(hostLogin),className:"w-8 h-8 overflow-hidden transition-all duration-300 border-2 border-white border-solid rounded-full"},__jsx(avatar_hover_card.Z,{contributor:hostLogin,repositories}))})))};StackedAvatar.displayName="StackedAvatar";const stacked_avatar=StackedAvatar;try{stackedavatar.displayName="stackedavatar",stackedavatar.__docgenInfo={description:"",displayName:"stackedavatar",props:{contributors:{defaultValue:null,description:"",name:"contributors",required:!0,type:{name:"Contributor[]"}},visibleQuantity:{defaultValue:{value:"5"},description:"",name:"visibleQuantity",required:!1,type:{name:"number"}},classNames:{defaultValue:null,description:"",name:"classNames",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/molecules/StackedAvatar/stacked-avatar.tsx#stackedavatar"]={docgenInfo:stackedavatar.__docgenInfo,name:"stackedavatar",path:"components/molecules/StackedAvatar/stacked-avatar.tsx#stackedavatar"})}catch(__react_docgen_typescript_loader_error){}},"./lib/hooks/useList.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Uc:()=>useFetchListContributors,Z7:()=>useFetchAllLists,k:()=>addListContributor});var swr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/swr/core/dist/index.mjs"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),lib_utils_public_api_fetcher__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils/public-api-fetcher.ts"),lib_utils_supabase__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./lib/utils/supabase.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const useFetchAllLists=function(){var _data$data,_data$meta;let range=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,shouldFetch=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{0:page,1:setPage}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1),{0:limit,1:setLimit}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(10),query=new URLSearchParams;query.set("page","".concat(page)),query.set("limit","".concat(limit)),query.set("range","".concat(range));const baseEndpoint="lists?".concat(query.toString()),endpointString="".concat(baseEndpoint),{data,error,mutate}=(0,swr__WEBPACK_IMPORTED_MODULE_0__.ZP)(shouldFetch?endpointString:null,lib_utils_public_api_fetcher__WEBPACK_IMPORTED_MODULE_2__.N);return{data:null!==(_data$data=null==data?void 0:data.data)&&void 0!==_data$data?_data$data:[],isLoading:!error&&!data,isError:!!error,meta:null!==(_data$meta=null==data?void 0:data.meta)&&void 0!==_data$meta?_data$meta:{itemCount:0,limit:0,page:0,hasNextPage:!1,hasPreviousPage:!1,pageCount:0},mutate,setPage,setLimit}},useFetchListContributors=function(workspaceId,listId){var _data$data2,_data$meta2;let range=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const{0:page,1:setPage}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1),{0:limit,1:setLimit}=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(10),query=new URLSearchParams;query.set("page","".concat(page)),query.set("limit","".concat(limit)),query.set("range","".concat(range));const endpointString="workspaces/".concat(workspaceId,"/userLists/").concat(listId,"/contributors?").concat(query.toString()),{data,error,mutate}=(0,swr__WEBPACK_IMPORTED_MODULE_0__.ZP)(listId?endpointString:null,lib_utils_public_api_fetcher__WEBPACK_IMPORTED_MODULE_2__.N);return{data:null!==(_data$data2=null==data?void 0:data.data)&&void 0!==_data$data2?_data$data2:[],isLoading:!error&&!data,isError:!!error,meta:null!==(_data$meta2=null==data?void 0:data.meta)&&void 0!==_data$meta2?_data$meta2:{itemCount:0,limit:0,page:0,hasNextPage:!1,hasPreviousPage:!1,pageCount:0},mutate,setPage,setLimit}},addListContributor=async(listId,contributors,workspaceId)=>{var _sessionResponse$data;const sessionResponse=await lib_utils_supabase__WEBPACK_IMPORTED_MODULE_3__.O.auth.getSession(),sessionToken=null==sessionResponse||null===(_sessionResponse$data=sessionResponse.data.session)||void 0===_sessionResponse$data?void 0:_sessionResponse$data.access_token;try{const requestUrl=workspaceId?"workspaces/".concat(workspaceId,"/userLists/").concat(listId,"/contributors"):"lists/".concat(listId,"/contributors"),response=await fetch(requestUrl,{method:"POST",body:JSON.stringify({contributors}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionToken)}});if(response.ok){return{data:await response.json(),error:null}}return{data:null,error:{message:(await response.json()).message,listId}}}catch(error){return console.log(error),{data:null,error:{message:error.message,listId}}}}},"./lib/utils/fallback-values.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>DATA_FALLBACK_VALUE});const DATA_FALLBACK_VALUE="-"}}]);
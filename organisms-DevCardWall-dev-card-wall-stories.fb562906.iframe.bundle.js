"use strict";(self.webpackChunk_open_sauced_app=self.webpackChunk_open_sauced_app||[]).push([[624],{"./components/organisms/DevCardWall/dev-card-wall.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,LoadingState:()=>LoadingState,__namedExportsOrder:()=>__namedExportsOrder,default:()=>dev_card_wall_stories});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),util=__webpack_require__("./node_modules/react-use/esm/misc/util.js");const esm_useIsomorphicLayoutEffect=util.jU?react.useLayoutEffect:react.useEffect;var defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const esm_useMeasure=util.jU&&void 0!==window.ResizeObserver?function useMeasure(){var _a=(0,react.useState)(null),element=_a[0],ref=_a[1],_b=(0,react.useState)(defaultState),rect=_b[0],setRect=_b[1],observer=(0,react.useMemo)((function(){return new window.ResizeObserver((function(entries){if(entries[0]){var _a=entries[0].contentRect,x=_a.x,y=_a.y,width=_a.width,height=_a.height,top_1=_a.top,left=_a.left,bottom=_a.bottom,right=_a.right;setRect({x,y,width,height,top:top_1,left,bottom,right})}}))}),[]);return esm_useIsomorphicLayoutEffect((function(){if(element)return observer.observe(element),function(){observer.disconnect()}}),[element]),[ref,rect]}:function(){return[util.ZT,defaultState]};var useKey=__webpack_require__("./node_modules/react-use/esm/useKey.js");const esm_useKeyPress=function(keyFilter){var _a=(0,react.useState)([!1,null]),state=_a[0],set=_a[1];return(0,useKey.Z)(keyFilter,(function(event){return set([!0,event])}),{event:"keydown"},[state]),(0,useKey.Z)(keyFilter,(function(event){return set([!1,event])}),{event:"keyup"},[state]),state};var react_spring_web_modern=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring_web.modern.mjs"),use_gesture_react_esm=__webpack_require__("./node_modules/@use-gesture/react/dist/use-gesture-react.esm.js");const noop=()=>{};var dev_card=__webpack_require__("./components/molecules/DevCard/dev-card.tsx"),Button_button=__webpack_require__("./components/shared/Button/button.tsx"),useFetchUserDevStats=__webpack_require__("./lib/hooks/api/useFetchUserDevStats.ts");const chevron_left_src="static/media/chevron-left.de916dea.svg";var __jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const coordinatesForIndex=height=>index=>{const tilesPerColumn=Math.floor((height-20)/368)+1,y=368*(index%tilesPerColumn)-(Math.floor(index/tilesPerColumn)%2==1?0:139.20000000000002);return{x:265*Math.floor(index/tilesPerColumn),y}};function RenderedDevCard(_ref){let{username,isInteractive}=_ref;const{data:devstats,isLoading,error}=(0,useFetchUserDevStats.X)({username});return __jsx(dev_card.Z,{key:"card_".concat(null==devstats?void 0:devstats.login),devstats,isLoading,error,isInteractive,isFlipped:!1,hideProfileButton:!0})}function DevCardWall(_ref2){let{isLoading=!1,usernames,initialCardIndex}=_ref2;const[containerRef,{height}]=esm_useMeasure(),{0:activeCardIndex,1:setActiveCardIndex}=(0,react.useState)(null),[outsideClickRef]=function useOutsideClickRef(handler,when=!0){const savedHandler=(0,react.useRef)(handler),[node,setNode]=(0,react.useState)(null),memoizedCallback=(0,react.useCallback)((event=>{node&&!node.contains(event.target)&&savedHandler.current(event)}),[node]);(0,react.useEffect)((()=>{savedHandler.current=handler}));const ref=(0,react.useCallback)((nodeElement=>{setNode(nodeElement)}),[]);return(0,react.useEffect)((()=>when?(document.addEventListener("click",memoizedCallback,!0),document.addEventListener("ontouchstart",memoizedCallback,!0),()=>{document.removeEventListener("click",memoizedCallback,!0),document.removeEventListener("ontouchstart",memoizedCallback,!0)}):noop),[when,memoizedCallback]),[ref]}((()=>{setActiveCardIndex(null)})),[leftArrowIsPressed]=esm_useKeyPress("ArrowLeft"),[downArrowIsPressed]=esm_useKeyPress("ArrowDown"),pulseAnimation=(0,react_spring_web_modern.q_)({from:{opacity:.1},to:isLoading?[{opacity:.2},{opacity:.1}]:{opacity:0},loop:isLoading,config:{duration:1e3}}),nextButtonActiveStyle={opacity:.8,translateY:4,config:{duration:100}},nextButtonDefaultStyle={opacity:1,translateY:0},[nextButtonSpringStyle,nextButtonSpringApi]=(0,react_spring_web_modern.q_)((()=>leftArrowIsPressed?nextButtonActiveStyle:nextButtonDefaultStyle),[leftArrowIsPressed]),bindHover=(0,use_gesture_react_esm.useGesture)({onHover:state=>{const hoverIndex=state.args[0];cardApi.start((i=>state.hovering&&i===hoverIndex&&i!==activeCardIndex?{translateY:-20}:{translateY:0}))}}),[cardSprings,cardApi]=(0,react_spring_web_modern.bY)(usernames.length,(index=>({from:{x:0,y:0,opacity:1,translateY:0,scale:1,zIndex:0},to:_objectSpread({scale:1,opacity:1,zIndex:0,delay:100*index},coordinatesForIndex(height)(index))})),[usernames,height]),[cardButtonSprings,cardButtonApi]=(0,react_spring_web_modern.bY)(usernames.length,(index=>({opacity:0,translateY:50})),[usernames,activeCardIndex]);(0,react.useEffect)((()=>{!async function animate(){cardApi.start((i=>i===activeCardIndex?{scale:1.1,translateY:0,opacity:1,zIndex:49,x:0,y:height/2-174,immediate:"zIndex"}:_objectSpread(_objectSpread({scale:1,translateY:0,opacity:1,zIndex:0},coordinatesForIndex(height)(i)),{},{immediate:"zIndex"}))),cardButtonApi.start((i=>i===activeCardIndex?{opacity:1,translateY:0,delay:250}:{opacity:0,translateY:50}))}()}),[activeCardIndex,cardApi,cardButtonApi,height]),(0,react.useEffect)((()=>{void 0!==initialCardIndex&&setActiveCardIndex(initialCardIndex)}),[initialCardIndex]);const nextCard=(0,react.useCallback)((()=>{setActiveCardIndex((index=>null===index?0:(index+1)%usernames.length))}),[usernames]);(0,useKey.Z)("ArrowLeft",nextCard,{},[nextCard]),(0,useKey.Z)("ArrowDown",nextCard,{},[nextCard]),(0,react.useEffect)((()=>{leftArrowIsPressed||downArrowIsPressed?nextButtonSpringApi.start({opacity:.8,translateY:4,config:{duration:100}}):nextButtonSpringApi.start({opacity:1,translateY:0})}),[leftArrowIsPressed,downArrowIsPressed,nextButtonSpringApi]);const loadingSkeleton=Array.from({length:20},((_,i)=>{const{x,y}=coordinatesForIndex(height)(i);return __jsx(react_spring_web_modern.q.div,{className:"grid absolute rounded-3xl bg-white",key:i,style:_objectSpread({width:"".concat(245,"px"),height:"".concat(348,"px"),left:"".concat(x,"px"),top:"".concat(y,"px")},pulseAnimation)})})),cardElements=cardSprings.map(((_ref3,i)=>{let{x,y,translateY,scale,zIndex}=_ref3;const username=usernames[i],buttonSpring=cardButtonSprings[i];return __jsx(react_spring_web_modern.q.div,(0,esm_extends.Z)({},bindHover(i),{className:"grid absolute gap-3",key:i,onClick:event=>{event.stopPropagation(),setActiveCardIndex(i)},style:{width:"".concat(245,"px"),height:"".concat(348,"px"),left:x.to((x=>"".concat(x,"px"))),top:y.to((y=>"".concat(y,"px"))),translateY:translateY.to((y=>"".concat(y,"px"))),scale,zIndex}}),__jsx(RenderedDevCard,{username,isInteractive:i===activeCardIndex}),__jsx(react_spring_web_modern.q.div,{key:"button",className:"grid place-content-center",style:_objectSpread({},buttonSpring)},__jsx(Button_button.Z,{variant:"primary",href:"/u/".concat(username)},"View Profile")))}));return __jsx("div",{className:"grid relative",ref:outsideClickRef,onClick:()=>{setActiveCardIndex(null)}},__jsx("div",{className:"relative ml-20",ref:containerRef},loadingSkeleton,cardElements,__jsx("div",{style:{width:"calc(100% + 15px)",position:"absolute",top:0,left:-15,bottom:0,right:0,zIndex:2,pointerEvents:"none",background:"linear-gradient(90deg, #000 0%, rgba(0, 0, 0, 0.00) 100%)"}}),__jsx("div",{style:{width:"calc(100% + 15px)",position:"absolute",top:0,left:-15,zIndex:2,pointerEvents:"none",height:"72.42614145%",background:"linear-gradient(180deg, #000 0%, rgba(0, 0, 0, 0.00) 40%)"}})),__jsx(react_spring_web_modern.q.button,{onClick:function handleNextButtonClick(event){event.stopPropagation(),nextCard()},onMouseDown:event=>nextButtonSpringApi.start(nextButtonActiveStyle),onMouseUp:event=>nextButtonSpringApi.start(nextButtonDefaultStyle),className:"rounded-md border border-amber-700 w-10 h-10 absolute left-0 top-1/2 block z-50 active:outline-none",style:_objectSpread({backgroundColor:"#271700",backgroundImage:"url(".concat(chevron_left_src,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center center"},nextButtonSpringStyle)}))}RenderedDevCard.displayName="RenderedDevCard",DevCardWall.displayName="DevCardWall";try{devcardwall.displayName="devcardwall",devcardwall.__docgenInfo={description:"",displayName:"devcardwall",props:{usernames:{defaultValue:null,description:"",name:"usernames",required:!0,type:{name:"string[]"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},initialCardIndex:{defaultValue:null,description:"",name:"initialCardIndex",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/organisms/DevCardWall/dev-card-wall.tsx#devcardwall"]={docgenInfo:devcardwall.__docgenInfo,name:"devcardwall",path:"components/organisms/DevCardWall/dev-card-wall.tsx#devcardwall"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,_LoadingState$paramet,_LoadingState$paramet2;function dev_card_wall_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function dev_card_wall_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?dev_card_wall_stories_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dev_card_wall_stories_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const dev_card_wall_stories={title:"Design System/Organisms/DevCardWall",component:DevCardWall,args:{usernames:["zeucapua","nickytonline","brandonroberts"],isLoading:!1}},Default={args:{usernames:["zeucapua","nickytonline","brandonroberts"],isLoading:!1}},LoadingState={args:{usernames:void 0,isLoading:!0}};Default.parameters=dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},Default.parameters),{},{docs:dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:dev_card_wall_stories_objectSpread({originalSource:'{\n  args: {\n    usernames: ["zeucapua", "nickytonline", "brandonroberts"],\n    isLoading: false\n  }\n}'},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})}),LoadingState.parameters=dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},LoadingState.parameters),{},{docs:dev_card_wall_stories_objectSpread(dev_card_wall_stories_objectSpread({},null===(_LoadingState$paramet=LoadingState.parameters)||void 0===_LoadingState$paramet?void 0:_LoadingState$paramet.docs),{},{source:dev_card_wall_stories_objectSpread({originalSource:"{\n  args: {\n    usernames: undefined,\n    isLoading: true\n  }\n}"},null===(_LoadingState$paramet2=LoadingState.parameters)||void 0===_LoadingState$paramet2||null===(_LoadingState$paramet2=_LoadingState$paramet2.docs)||void 0===_LoadingState$paramet2?void 0:_LoadingState$paramet2.source)})});const __namedExportsOrder=["Default","LoadingState"]},"./lib/hooks/api/useFetchUserDevStats.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>useFetchUserDevStats});var swr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/swr/core/dist/index.mjs"),lib_utils_public_api_fetcher__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./lib/utils/public-api-fetcher.ts");function useFetchUserDevStats(_ref){let{username,range}=_ref;const query=new URLSearchParams;range&&query.set("range",range.toString());const{data,error,isLoading,mutate}=(0,swr__WEBPACK_IMPORTED_MODULE_0__.ZP)("users/".concat(username,"/devstats?").concat(query),lib_utils_public_api_fetcher__WEBPACK_IMPORTED_MODULE_1__.N);return{data,error,isLoading,mutate}}},"./lib/utils/public-api-fetcher.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>expPublicApiFetcher,N:()=>publicApiFetcher});var _supabase__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./lib/utils/supabase.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const publicApiFetcher=async apiUrl=>await apiFetcher("https://beta.api.opensauced.pizza/v2",apiUrl),expPublicApiFetcher=async apiUrl=>await apiFetcher("https://beta.api.opensauced.pizza/v2",apiUrl),apiFetcher=async(baseUrl,apiUrl)=>{var _sessionResponse$data;const sessionResponse=await _supabase__WEBPACK_IMPORTED_MODULE_0__.O.auth.getSession(),sessionToken=null==sessionResponse||null===(_sessionResponse$data=sessionResponse.data.session)||void 0===_sessionResponse$data?void 0:_sessionResponse$data.access_token,res=await fetch("".concat(baseUrl,"/").concat(apiUrl),{headers:{accept:"application/json",Authorization:"Bearer ".concat(sessionToken)}});if(!res.ok){const error=new Error("HttpError");throw error.message="".concat(res.status," ").concat(res.statusText),error.stack=JSON.stringify(await res.json()),console.error(error),error}return res.json()}},"./node_modules/react-use/esm/misc/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S1:()=>off,ZT:()=>noop,jU:()=>isBrowser,on:()=>on});var noop=function(){};function on(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.addEventListener&&obj.addEventListener.apply(obj,args)}function off(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.removeEventListener&&obj.removeEventListener.apply(obj,args)}var isBrowser="undefined"!=typeof window},"./node_modules/react-use/esm/useKey.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>esm_useKey});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),util=__webpack_require__("./node_modules/react-use/esm/misc/util.js"),defaultTarget=util.jU?window:null,isListenerType1=function(target){return!!target.addEventListener},isListenerType2=function(target){return!!target.on};const esm_useEvent=function(name,handler,target,options){void 0===target&&(target=defaultTarget),(0,react.useEffect)((function(){if(handler&&target)return isListenerType1(target)?(0,util.on)(target,name,handler,options):isListenerType2(target)&&target.on(name,handler,options),function(){isListenerType1(target)?(0,util.S1)(target,name,handler,options):isListenerType2(target)&&target.off(name,handler,options)}}),[name,handler,target,JSON.stringify(options)])};const esm_useKey=function(key,fn,opts,deps){void 0===fn&&(fn=util.ZT),void 0===opts&&(opts={}),void 0===deps&&(deps=[key]);var _a=opts.event,event=void 0===_a?"keydown":_a,target=opts.target,options=opts.options,useMemoHandler=(0,react.useMemo)((function(){var keyFilter,predicate="function"==typeof(keyFilter=key)?keyFilter:"string"==typeof keyFilter?function(event){return event.key===keyFilter}:keyFilter?function(){return!0}:function(){return!1};return function(handlerEvent){if(predicate(handlerEvent))return fn(handlerEvent)}}),deps);esm_useEvent(event,useMemoHandler,target,options)}}}]);
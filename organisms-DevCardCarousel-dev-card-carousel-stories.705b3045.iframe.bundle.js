"use strict";(self.webpackChunk_open_sauced_app=self.webpackChunk_open_sauced_app||[]).push([[541],{"./components/organisms/DevCardCarousel/dev-card-carousel.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>dev_card_carousel_stories});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js");var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const index_esm=function cntl(template){for(var templateElements=[],_i=1;_i<arguments.length;_i++)templateElements[_i-1]=arguments[_i];return template.reduce((function(sum,n,index){var templateElement=templateElements[index];return"string"==typeof templateElement?""+sum+n+templateElement:""+sum+n}),"").trim().replace(/\s{2,}/g," ")};var _templateObject,react_spring_web_modern=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring_web.modern.mjs"),use_gesture_react_esm=__webpack_require__("./node_modules/@use-gesture/react/dist/use-gesture-react.esm.js"),useKey=__webpack_require__("./node_modules/react-use/esm/useKey.js"),dev_card=__webpack_require__("./components/molecules/DevCard/dev-card.tsx"),useFetchUserDevStats=__webpack_require__("./lib/hooks/api/useFetchUserDevStats.ts"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const startTo=function(index){return{x:-50*index,scale:1-.1*index,delay:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?100*index:0,zIndex:100-index,coverOpacity:.1*index,immediate:key=>"zIndex"===key}},transform=(x,y,s)=>"translate(".concat(x,"px, ").concat(y,"px) scale(").concat(s,")");function RenderedDevCard(_ref){let{username,isInteractive}=_ref;const{data:devstats,isLoading,error}=(0,useFetchUserDevStats.X)({username});return __jsx(dev_card.Z,{key:"card_".concat(null==devstats?void 0:devstats.login),devstats,isLoading,error,isInteractive,isFlipped:!1})}function DevCardCarousel(props){const{0:cardOrder,1:setCardOrder}=(0,react.useState)(props.usernames.map(((_,index)=>index))),[springProps,api]=(0,react_spring_web_modern.bY)(props.usernames.length,(i=>_objectSpread(_objectSpread({},startTo(i,!0)),{},{from:{x:0,scale:1,y:0,zIndex:0,coverOpacity:0}}))),bind=(0,use_gesture_react_esm.useGesture)({onHover:state=>{const hoverIndex=state.args[0];api.start((i=>({y:state.hovering&&i===hoverIndex?-20:0})))}}),handleSelect=(0,react.useCallback)((cardOrderIndex=>{var _props$onSelect;const cardIndex=cardOrder[cardOrderIndex];null===(_props$onSelect=props.onSelect)||void 0===_props$onSelect||_props$onSelect.call(props,props.usernames[cardIndex]),setCardOrder((cards=>[...cards.slice(cardOrderIndex),...cards.slice(0,cardOrderIndex)]))}),[cardOrder,props,setCardOrder]);return(0,useKey.Z)("ArrowRight",(()=>{handleSelect(cardOrder.length-1)}),{},[handleSelect]),(0,useKey.Z)("ArrowLeft",(()=>{handleSelect(1)}),{},[handleSelect]),(0,react.useEffect)((()=>{api.start((i=>{const newIndex=cardOrder.indexOf(i);return _objectSpread({},startTo(newIndex))}))}),[cardOrder,api]),__jsx("div",{className:"grid place-content-center mb-8"},springProps.map(((_ref2,index)=>{let{x,y,scale,zIndex,coverOpacity}=_ref2;const username=props.usernames[index],cardOrderIndex=cardOrder.indexOf(index),className=index_esm(_templateObject||(_templateObject=function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n          DevCardCarousel-card\n          rounded-3xl\n          left-0\n          top-0\n          w-full\n          h-full\n          relative\n          cursor-pointer\n        "])));return __jsx(react_spring_web_modern.q.div,(0,esm_extends.Z)({},bind(index),{key:username,className,role:"button",title:username,style:{gridArea:"1 / 1",zIndex,transform:(0,react_spring_web_modern.to)([x,y,scale],transform),transformOrigin:"left center"}}),__jsx(RenderedDevCard,{username,isInteractive:index===cardOrder[0]}),__jsx(react_spring_web_modern.q.div,{key:"cover",className:"DevCardCarousel-darken absolute left-0 right-0 top-0 bottom-0 bg-black rounded-3xl z-10",title:"Select @".concat(username),style:{opacity:coverOpacity,pointerEvents:index===cardOrder[0]?"none":"auto"},onClick:()=>{!function handleClick(cardOrderIndex){handleSelect(cardOrderIndex)}(cardOrderIndex)}}))})))}RenderedDevCard.displayName="RenderedDevCard",DevCardCarousel.displayName="DevCardCarousel";try{devcardcarousel.displayName="devcardcarousel",devcardcarousel.__docgenInfo={description:"",displayName:"devcardcarousel",props:{usernames:{defaultValue:null,description:"",name:"usernames",required:!0,type:{name:"string[]"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"((usernamename: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/organisms/DevCardCarousel/dev-card-carousel.tsx#devcardcarousel"]={docgenInfo:devcardcarousel.__docgenInfo,name:"devcardcarousel",path:"components/organisms/DevCardCarousel/dev-card-carousel.tsx#devcardcarousel"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2;function dev_card_carousel_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function dev_card_carousel_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?dev_card_carousel_stories_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dev_card_carousel_stories_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const dev_card_carousel_stories={title:"Design System/Organisms/DevCardCarousel",component:DevCardCarousel,args:{usernames:["zeucapua","nickytonline","brandonroberts"]}},Default={args:{usernames:["zeucapua","nickytonline","brandonroberts"]}};Default.parameters=dev_card_carousel_stories_objectSpread(dev_card_carousel_stories_objectSpread({},Default.parameters),{},{docs:dev_card_carousel_stories_objectSpread(dev_card_carousel_stories_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:dev_card_carousel_stories_objectSpread({originalSource:'{\n  args: {\n    usernames: ["zeucapua", "nickytonline", "brandonroberts"]\n  }\n}'},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})});const __namedExportsOrder=["Default"]},"./lib/hooks/api/useFetchUserDevStats.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>useFetchUserDevStats});var swr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/swr/core/dist/index.mjs"),lib_utils_public_api_fetcher__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./lib/utils/public-api-fetcher.ts");function useFetchUserDevStats(_ref){let{username,range}=_ref;const query=new URLSearchParams;range&&query.set("range",range.toString());const{data,error,isLoading,mutate}=(0,swr__WEBPACK_IMPORTED_MODULE_0__.ZP)("users/".concat(username,"/devstats?").concat(query),lib_utils_public_api_fetcher__WEBPACK_IMPORTED_MODULE_1__.N);return{data,error,isLoading,mutate}}},"./lib/utils/public-api-fetcher.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>expPublicApiFetcher,N:()=>publicApiFetcher});var _supabase__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./lib/utils/supabase.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const publicApiFetcher=async apiUrl=>await apiFetcher("https://beta.api.opensauced.pizza/v2",apiUrl),expPublicApiFetcher=async apiUrl=>await apiFetcher("https://beta.api.opensauced.pizza/v2",apiUrl),apiFetcher=async(baseUrl,apiUrl)=>{var _sessionResponse$data;const sessionResponse=await _supabase__WEBPACK_IMPORTED_MODULE_0__.O.auth.getSession(),sessionToken=null==sessionResponse||null===(_sessionResponse$data=sessionResponse.data.session)||void 0===_sessionResponse$data?void 0:_sessionResponse$data.access_token,res=await fetch("".concat(baseUrl,"/").concat(apiUrl),{headers:{accept:"application/json",Authorization:"Bearer ".concat(sessionToken)}});if(!res.ok){const error=new Error("HttpError");throw error.message="".concat(res.status," ").concat(res.statusText),error.stack=JSON.stringify(await res.json()),console.error(error),error}return res.json()}},"./node_modules/react-use/esm/misc/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S1:()=>off,ZT:()=>noop,jU:()=>isBrowser,on:()=>on});var noop=function(){};function on(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.addEventListener&&obj.addEventListener.apply(obj,args)}function off(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.removeEventListener&&obj.removeEventListener.apply(obj,args)}var isBrowser="undefined"!=typeof window},"./node_modules/react-use/esm/useKey.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>esm_useKey});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),util=__webpack_require__("./node_modules/react-use/esm/misc/util.js"),defaultTarget=util.jU?window:null,isListenerType1=function(target){return!!target.addEventListener},isListenerType2=function(target){return!!target.on};const esm_useEvent=function(name,handler,target,options){void 0===target&&(target=defaultTarget),(0,react.useEffect)((function(){if(handler&&target)return isListenerType1(target)?(0,util.on)(target,name,handler,options):isListenerType2(target)&&target.on(name,handler,options),function(){isListenerType1(target)?(0,util.S1)(target,name,handler,options):isListenerType2(target)&&target.off(name,handler,options)}}),[name,handler,target,JSON.stringify(options)])};const esm_useKey=function(key,fn,opts,deps){void 0===fn&&(fn=util.ZT),void 0===opts&&(opts={}),void 0===deps&&(deps=[key]);var _a=opts.event,event=void 0===_a?"keydown":_a,target=opts.target,options=opts.options,useMemoHandler=(0,react.useMemo)((function(){var keyFilter,predicate="function"==typeof(keyFilter=key)?keyFilter:"string"==typeof keyFilter?function(event){return event.key===keyFilter}:keyFilter?function(){return!0}:function(){return!1};return function(handlerEvent){if(predicate(handlerEvent))return fn(handlerEvent)}}),deps);esm_useEvent(event,useMemoHandler,target,options)}}}]);